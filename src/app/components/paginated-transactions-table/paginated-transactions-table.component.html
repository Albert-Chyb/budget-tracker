<ng-container *ngIf="data$ | async as data">
	<div class="transactions">
		<table mat-table [dataSource]="transactionsDataSource">
			<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
			<tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
			<ng-container matColumnDef="amount">
				<th mat-header-cell *matHeaderCellDef>Wartość</th>
				<td mat-cell *matCellDef="let transaction">
					{{ transaction.type === 'expense' ? '-' : '+' }}
					{{ transaction.amount | currency }}
				</td>
			</ng-container>

			<ng-container matColumnDef="date">
				<th mat-header-cell *matHeaderCellDef>Data</th>
				<td mat-cell *matCellDef="let transaction">
					{{ transaction.date | date }}
				</td>
			</ng-container>

			<ng-container matColumnDef="category">
				<th mat-header-cell *matHeaderCellDef>Kategoria</th>
				<td mat-cell *matCellDef="let transaction">
					{{ getCategoryName(transaction.category, data.categories) }}
				</td>
			</ng-container>

			<ng-container matColumnDef="wallet">
				<th mat-header-cell *matHeaderCellDef>Portfel</th>
				<td mat-cell *matCellDef="let transaction">
					{{ getWalletName(transaction.wallet, data.wallets) }}
				</td>
			</ng-container>
		</table>

		<mat-paginator
			[length]="4"
			[pageSize]="pageSize"
			[pageSizeOptions]="[1, 2, 3, 10, 20, 50]"
			(page)="handlePageChange($event)"
		></mat-paginator>

		<ng-container *ngIf="isLoading$ | async; then loader"></ng-container>
	</div>
</ng-container>

<ng-template #loader>
	<div class="transactions__loader">
		<mat-spinner></mat-spinner>
	</div>
</ng-template>
