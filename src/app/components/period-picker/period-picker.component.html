<ng-container *ngIf="years$ | async as years">
	<form class="period-picker-form" id="period-picker" #periodForm="ngForm">
		<mat-button-toggle-group
			name="period"
			aria-label="Okres z jakiego wyświetlić statystyki"
			[(ngModel)]="selectedPeriod"
		>
			<mat-button-toggle value="year">Rok</mat-button-toggle>
			<mat-button-toggle value="month">Miesiąc</mat-button-toggle>
			<mat-button-toggle value="week">Tydzień</mat-button-toggle>
		</mat-button-toggle-group>

		<mat-form-field class="year" *ngIf="hasSelection">
			<mat-label>Rok</mat-label>

			<mat-select name="year" [(ngModel)]="year" #yearModel="ngModel" required>
				<mat-option *ngFor="let year of years" [value]="year">
					{{ year }}
				</mat-option>
			</mat-select>
		</mat-form-field>

		<mat-form-field class="month" *ngIf="isSelectedWeek || isSelectedMonth">
			<mat-label>Miesiąc</mat-label>

			<mat-select
				name="month"
				[(ngModel)]="month"
				#monthModel="ngModel"
				required
			>
				<mat-option *ngFor="let month of months; let i = index" [value]="i">
					{{ month }}
				</mat-option>
			</mat-select>
		</mat-form-field>

		<mat-form-field class="week" *ngIf="isSelectedWeek">
			<mat-label>Tydzień</mat-label>

			<mat-select name="week" [(ngModel)]="week" #weekModel="ngModel" required>
				<mat-option *ngFor="let weekIndex of weeks" [value]="weekIndex">
					{{ weekIndex + 1 }}
				</mat-option>
			</mat-select>
		</mat-form-field>
	</form>

	<mat-dialog-actions>
		<button mat-button color="warn" form="period-picker" mat-dialog-close>
			Anuluj
		</button>

		<button
			mat-button
			color="accent"
			form="period-picker"
			[mat-dialog-close]="processValue()"
			[disabled]="periodForm.invalid"
		>
			OK
		</button>
	</mat-dialog-actions>
</ng-container>
